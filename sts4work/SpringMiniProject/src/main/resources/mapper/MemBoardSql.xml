<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boot.data.mapper.MemBoardMapperInter">
  
  <!-- 갯수 -->
  <select id="getTotalCount" resultType="int">
    select count(*) from memboard 
  </select>
  
  <!-- insert -->
  <insert id="insertMemBoard" parameterType="MemBoardDto">
    insert into memboard (name,myid,subject,content,uploadfile,readcount,writeday)
    values (#{name}, #{myid}, #{subject}, #{content}, #{uploadfile}, 0, now())
  </insert>
  
  <!-- 페이징처리 -->
  <select id="getlist" parameterType="HashMap" resultType="MemBoardDto">
    select * from memboard order by num desc limit #{start}, #{perpage}
  </select>
  
  <!-- num값 넘기기 -->
  <select id="getData" parameterType="String" resultType="MemBoardDto">
    select * from memboard where num=#{num}
  </select>
  
  <!-- readcount 페이지 처리  -->
  <update id="updateReadCount" parameterType="String">
    update memboard set readcount=readcount+1 where num=#{num}
  </update>
  
  <!-- 마지막 페이징 -->
  <select id="getMaxNum" resultType="int">
    select ifnull(max(num),0) from memboard
  </select>
</mapper>